-----------------------------------------------------------------------
-- An example of Actor Prolog program.                               --
-- (c) 2015 IRE RAS Alexei A. Morozov                                --
-----------------------------------------------------------------------

import .. from "morozov/Webcam";
import .. from "morozov/Java2D";

PREDICATES:

imperative:

test1;
test2;
test3;
test4;
test5;
test6;

class 'Main' (specialized 'Canvas2D'):
--
internal:
--
	webcam	= ('Webcam');
	buffer	= ('BufferedImage');
	con	= ('Console');
--
[
goal:-!,
	test1,
	test2,
	test3,
	test4,
	test5,
	test6.
--
test1:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 1"),
	webcam ? open,
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
--
test2:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 2"),
	Result== webcam?open(),
	con ? set_color('DkGreen'),
	con ? writeln("\tWebcam is open: ",Result),
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
--
test3:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 3"),
	webcam ? open('default'),
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
--
test4:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 4"),
	Result== webcam?open('default'),
	con ? set_color('DkGreen'),
	con ? writeln("\tWebcam is open: ",Result),
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
--
test5:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 5"),
	webcam ? open('default',1.0),
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
--
test6:-
	con ? set_color('RoyalBlue'),
	con ? writeln("Test 6"),
	Result== webcam?open('default',1.0),
	con ? set_color('DkGreen'),
	con ? writeln("\tWebcam is open: ",Result),
	webcam ? get_image(buffer),
	webcam ? close,
	draw_image(buffer,0,0,1,1),
	show.
]
